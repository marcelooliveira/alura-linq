<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css">
        body {
            margin: 20px 80px 20px 80px;
        }

        hr {
            border: none;
            height: 1px;
            /* Set the hr color */
            color: #333; /* old IE */
            background-color: #333; /* Modern Browsers */
        }

        .checkbox span {
            margin: 0 10px 0 10px;
            background-color: lightpink;
        }

        .checkbox:nth-child(4) span {
            margin: 0 10px 0 10px;
            background-color: lightgreen;
        }

        h4 {
            text-decoration: underline;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1><strong>Aula 2</strong></h1>

    <hr />

    <div class="MultipleChoice">
        <h3></h3>
        <p>
            Você foi encarregado de desenvolver uma consulta para listar nomes de modelos de automóveis
            e de seus fabricantes. Para isso, você recebe um arquivo de onde você obterá os dados
            para sua consulta. O arquivo tem o seguinte conteúdo:
        </p>

        <p>
            <pre>
    &lt;?xml version="1.0" encoding="utf-8" ?&gt;
    &lt;Automoveis&gt;
        &lt;Fabricantes&gt;
        &lt;Fabricante&gt;
            &lt;FabricanteId&gt;1&lt;/FabricanteId&gt;
            &lt;Nome&gt;Volkswagen&lt;/Nome&gt;
        &lt;/Fabricante&gt;
        &lt;Fabricante&gt;
            &lt;FabricanteId&gt;2&lt;/FabricanteId&gt;
            &lt;Nome&gt;Hyundai&lt;/Nome&gt;
        &lt;/Fabricante&gt;
        &lt;Fabricante&gt;
            &lt;FabricanteId&gt;3&lt;/FabricanteId&gt;
            &lt;Nome&gt;Toyota&lt;/Nome&gt;
        &lt;/Fabricante&gt;
        &lt;/Fabricantes&gt;
        &lt;Modelos&gt;
        &lt;Modelo&gt;
            &lt;ModeloId&gt;1001&lt;/ModeloId&gt;
            &lt;Nome&gt;Passat&lt;/Nome&gt;
            &lt;FabricanteId&gt;1&lt;/FabricanteId&gt;
        &lt;/Modelo&gt;
        &lt;Modelo&gt;
            &lt;ModeloId&gt;1002&lt;/ModeloId&gt;
            &lt;Nome&gt;Azera&lt;/Nome&gt;
            &lt;FabricanteId&gt;2&lt;/FabricanteId&gt;
        &lt;/Modelo&gt;
        &lt;Modelo&gt;
            &lt;ModeloId&gt;1003&lt;/ModeloId&gt;
            &lt;Nome&gt;Corolla&lt;/Nome&gt;
            &lt;FabricanteId&gt;3&lt;/FabricanteId&gt;
        &lt;/Modelo&gt;    
        &lt;/Modelos&gt;
    &lt;/Automoveis&gt;
            </pre>
        </p>

        <p>Que tipo de consulta Linq você deveria desenvolver?</p>

        <form>
            <div class="checkbox">
                <label><input type="checkbox" value="">Linq to File</label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Linq to Database</label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Linq to Query</label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="" checked="checked">Linq to XML
                </label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Linq to Objects</label>
            </div>
        </form>
    </div>

    <hr />

    <div class="MultipleChoice">
        <h3>[MODELO] Dê um nome expressivo ao seu exercicio MÚLTIPLA ESCOLHA</h3>
        <p>
            [MODELO] Considerando que essa é uma pergunta pertinente à aula, e considerando que
            o cenário que descrevemos, assinale a alternativa correta:
        </p>
        <form>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 1</label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 2</label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 3</label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="" checked="checked">Alternativa 4
                </label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 5</label>
            </div>
        </form>
    </div>

    <hr />

    <div class="MultipleChoice">
        <h3>[MODELO] Dê um nome expressivo ao seu exercicio MÚLTIPLA ESCOLHA</h3>
        <p>
            [MODELO] Considerando que essa é uma pergunta pertinente à aula, e considerando que
            o cenário que descrevemos, assinale a alternativa correta:
        </p>
        <form>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 1</label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 2</label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 3</label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="" checked="checked">Alternativa 4
                </label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 5</label>
            </div>
        </form>
    </div>

    <hr />

    <div class="MultipleChoice">
        <h3>[MODELO] Dê um nome expressivo ao seu exercicio MÚLTIPLA ESCOLHA</h3>
        <p>
            [MODELO] Considerando que essa é uma pergunta pertinente à aula, e considerando que
            o cenário que descrevemos, assinale a alternativa correta:
        </p>
        <form>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 1</label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 2</label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 3</label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="" checked="checked">Alternativa 4
                </label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">Alternativa 5</label>
            </div>
        </form>
    </div>

    <hr />
    <div class="CallToAction">
        <h3>Consulta com Join com Linq To XML</h3>
        <p>Observe o XML abaixo, que está contido no arquivo <b>Data\AluraTunes.xml</b>:</p>

        <p>
            <pre>
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;AluraTunes&gt;
    &lt;Generos&gt;
        &lt;Genero&gt;
            &lt;GeneroId&gt;1&lt;/GeneroId&gt;
            &lt;Nome&gt;Rock&lt;/Nome&gt;
        &lt;/Genero&gt;
        &lt;Genero&gt;
            &lt;GeneroId&gt;2&lt;/GeneroId&gt;
            &lt;Nome&gt;Reggae&lt;/Nome&gt;
        &lt;/Genero&gt;
        &lt;Genero&gt;
            &lt;GeneroId&gt;3&lt;/GeneroId&gt;
            &lt;Nome&gt;Classica&lt;/Nome&gt;
        &lt;/Genero&gt;
    &lt;/Generos&gt;
    &lt;Musicas&gt;
        &lt;Musica&gt;
            &lt;MusicaId&gt;1154&lt;/MusicaId&gt;
            &lt;Nome&gt;Sweet Child O' Mine&lt;/Nome&gt;
            &lt;GeneroId&gt;1&lt;/GeneroId&gt;
            &lt;Compositor&gt;Guns n Roses&lt;/Compositor&gt;
            &lt;Milissegundos&gt;356424&lt;/Milissegundos&gt;
            &lt;Bytes&gt;5879347&lt;/Bytes&gt;
            &lt;PrecoUnitario&gt;0.99&lt;/PrecoUnitario&gt;
        &lt;/Musica&gt;
        &lt;Musica&gt;
            &lt;MusicaId&gt;900&lt;/MusicaId&gt;
            &lt;Nome&gt;I Shot The Sheriff&lt;/Nome&gt;
            &lt;GeneroId&gt;2&lt;/GeneroId&gt;
            &lt;Compositor&gt;Marley&lt;/Compositor&gt;
            &lt;Milissegundos&gt;263862&lt;/Milissegundos&gt;
            &lt;Bytes&gt;8738973&lt;/Bytes&gt;
            &lt;PrecoUnitario&gt;0.99&lt;/PrecoUnitario&gt;
        &lt;/Musica&gt;
        &lt;Musica&gt;
            &lt;MusicaId&gt;3445&lt;/MusicaId&gt;
            &lt;Nome&gt;Danubio Azul&lt;/Nome&gt;
            &lt;GeneroId&gt;3&lt;/GeneroId&gt;
            &lt;Compositor&gt;Johann Strauss II&lt;/Compositor&gt;
            &lt;Milissegundos&gt;526696&lt;/Milissegundos&gt;
            &lt;Bytes&gt;8610225&lt;/Bytes&gt;
            &lt;PrecoUnitario&gt;0.99&lt;/PrecoUnitario&gt;
        &lt;/Musica&gt;
    &lt;/Musicas&gt;
&lt;/AluraTunes&gt;
            </pre>
        </p>
        
        <p>Desenvolva uma consulta <b>Linq to XML</b> para trazer:
            <ul>
                <li>O id da música,</li>
                <li>O nome da música,</li>
                <li>O nome do gênero</li>
            </ul>
        </p>

        <h4>Opinião do Alura</h4>

        <p>Primeiro, é necessário obter o elemento raiz do XML (<code>XElement</code>). Depois,
        os elementos <code>Generos</code> devem ser combinados com os elementos <code>Musicas</code>
        através do elemento <code>GeneroId</code>. No final, deve-se usar a cláusula <i>select</i>
        para se obter os elementos <code>MusicaId</code> e <code>Nome</code> da música e do gênero
        retornados pela consulta.</p>

        <p>
            <pre>
XElement root = XElement.Load(@"Data\AluraTunes.xml");

var query = from g in root.Element("Generos").Elements("Genero")
join m in root.Element("Musicas").Elements("Musica")
    on g.Element("GeneroId").Value equals m.Element("GeneroId").Value
select new
{
    MusicaId = m.Element("MusicaId").Value,
    Musica = m.Element("Nome").Value,
    Genero = g.Element("Nome").Value
};
            </pre>
        </p>
    </div>
</body>
</html>