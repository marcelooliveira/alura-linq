<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css">
        body {
            margin: 20px 80px 20px 80px;
        }

        hr {
            border: none;
            height: 1px;
            /* Set the hr color */
            color: #333; /* old IE */
            background-color: #333; /* Modern Browsers */
        }

        .checkbox span {
            margin: 0 10px 0 10px;
            background-color: lightpink;
        }

        .checkbox:nth-child(4) span {
            margin: 0 10px 0 10px;
            background-color: lightgreen;
        }

        h4 {
            text-decoration: underline;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1><strong>Aula 1</strong></h1>

    <hr />

    <div class="MultipleChoice">
        <h3>Sintaxe de Consulta Linq</h3>
        <p>
            Você é chamado por um colega desenvolvedor para ajudá-lo com uma consulta Linq. O seu colega
            acha que a consulta que ele criou está correta, mas que mesmo assim o programa não está compilando.
            Você pede para ver a consulta que ele criou, você encontra:
        </p>
        <p>
            <code>
                List&lt;Cliente&gt; clientes = new List&lt;Cliente&gt;()<br />
                {<br />
                    new Cliente { Id = 1001, Nome = "José Raimundo Bernardino" },<br />
                    new Cliente { Id = 1002, Nome = "Alexandre Marciano da Luz" },<br />
                    new Cliente { Id = 1003, Nome = "Milton Guilherme da Silva" }<br />
                };<br />
                <br />
                var queryClientes = <br />
                select cli <br />
                from cli in clientes;<br />
            </code>
        </p>

        <p>Qual a causa provável para o problema?</p>
        <form>
            <div class="checkbox">
                <label><input type="checkbox" value="">A tabela "clientes" não está no banco de dados, e precisa ser criada antes da consulta.<span>A coleção "clientes" não é uma tabela, e sim uma coleção em memória.</span></label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">O nome da variável "cli" é diferente do nome da coleção "clientes"<span>O nome da variável "cli" independe do nome da coleção.</span></label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">A consulta não está contida entre parênteses<span>Uma definição de consulta não precisa estar contida entre parênteses.</span></label>
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="" checked="checked">A consulta Linq implementada está começando pela cláusula <i>select</i>.
                    <span>CORRETO. Uma expressão Linq precisa começar pela cláusula <i>from</i>, e não pela cláusula <i>select</i>:<br />
                        <code>
                            var queryClientes = <br />
                            from cli in clientes<br />
                            select cli;<br />
                        </code>
                    </span>
                </label>
            </div>
            <div class="checkbox">
                <label><input type="checkbox" value="">A cláusula <i>select</i> não declara a lista de propriedades do cliente a serem trazidas pela consulta.</label>
                <span>Uma consulta Linq não precisa descrever necessariamente as propriedades da coleção "clientes". A variável "cli" da cláusula <i>select</i> já permite
                acessar essas propriedades.</span>
            </div>
        </form>
    </div>

    <hr />

    <div class="MultipleChoice">
        <h3>Filtrando com Linq</h3>
        <p>
            A lista abaixo contém os finalistas da prova de 100m rasos das Olimpíadas Rio 2016:
        </p>
        <p>
            <code>
                List&lt;Atleta&gt; atletas = new List&lt;Atleta&gt;()<br />
                {<br />
                new Atleta { Posicao = 1, CodigoPais = "JAM", Nome = "BOLT Usain", Tempo = 9.81f },<br />
                new Atleta { Posicao = 2, CodigoPais = "USA", Nome = "GATLIN Justin", Tempo = 9.89f },<br />
                new Atleta { Posicao = 3, CodigoPais = "CAN", Nome = "DE GRASSE Andre", Tempo = 9.91f },<br />
                new Atleta { Posicao = 4, CodigoPais = "JAM", Nome = "BLAKE Yohan", Tempo = 9.93f },<br />
                new Atleta { Posicao = 5, CodigoPais = "RSA", Nome = "SIMBINE Akani", Tempo = 9.94f },<br />
                new Atleta { Posicao = 6, CodigoPais = "CIV", Nome = "MEITE Ben Youssef", Tempo = 9.96f },<br />
                new Atleta { Posicao = 7, CodigoPais = "FRA", Nome = "VICAUT Jimmy", Tempo = 10.04f },<br />
                new Atleta { Posicao = 8, CodigoPais = "USA", Nome = "BROMELL Trayvon", Tempo = 10.06f }<br />
                };<br />
            </code>
        </p>
        <p>Como você faria a consulta para obter a lista dos finalistas jamaicanos (CodigoPais = JAM) ?</p>
        <form>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="">
                    <code>
                        var query = from a in atletas<br />
                        where a.CodigoPais = "JAM"<br />
                        select a;<br />
                    </code>
                </label>
                <span>A cláusula <i>where</i> exige o operador de igualdade "==", e não o operador de atribuição "=".</span>
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="">
                    <code>
                        var query = select a<br />
                        from a in atletas<br />
                        where a.CodigoPais == "JAM";<br />
                    </code>
                </label>
                <span>A cláusula <i>select</i> de uma consulta Linq deve aparecer no final da consulta</span>
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="">
                    <code>
                        var query = from a in atletas<br />
                        select a<br />
                        where a.CodigoPais == "JAM";<br />
                    </code>
                </label>
                <span>A cláusula <i>select</i> de uma consulta Linq deve aparecer no final da consulta</span>
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="" checked="checked">
                    <code>
                        var query = from a in atletas<br />
                        where a.CodigoPais == "JAM"<br />
                        select a;<br />
                    </code>
                </label>
                <span>CORRETO. O operador de igualdade está certo, e a cláusula <i>select</i> está no final da consulta.</span>
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="">
                    <code>
                        var query = from a in atletas<br />
                        where a.CodigoPais == "Jamaica"<br />
                        select a;<br />
                    </code>
                </label>
                <span>A listagem não tem um atleta com CodigoPais = "Jamaica". O correto seria where a.CodigoPais == "JAM"</span>
            </div>
        </form>
    </div>

    <hr />

    <div class="CallToAction">
        <h3>Consulta com Filtro (Com Método Contains)</h3>
        <p>
            Observe a lista de gêneros musicais abaixo:
        </p>
        <p>
            <code>
                List&lt;Genero&gt; generos = new List&lt;Genero&gt;<br />
                {<br />
                new Genero { Id = 1, Nome = "Rock" },<br />
                new Genero { Id = 2, Nome = "Reggae" },<br />
                new Genero { Id = 3, Nome = "Rock Progressivo" },<br />
                new Genero { Id = 4, Nome = "Jazz" },<br />
                new Genero { Id = 5, Nome = "Punk Rock" },<br />
                new Genero { Id = 6, Nome = "Classica" }<br />
                };<br />
            </code>
        </p>
        <p>Elabore uma consulta Linq para trazer somente os gêneros que contenham a palavra "Rock".</p>

        <h4>Opinião do Alura</h4>
        <p>
            Você pode obter os objetos da coleção "generos" com a cláusula <i>from</i>, e em seguida filtrar
            os nomes dos gêneros com a cláusula <i>where</i>, utilizando o método <i>Contains</i>:
        </p>
        <p>
            <code>
                var query = from g in generos<br />
                where g.Nome.Contains("Rock")<br />
                select g;<br />
            </code>
        </p>
    </div>

    <hr />

    <div class="CallToAction">
        <h3>Consulta com Filtro (Com Operador de Igualdade)</h3>
        <p>
            Observe a lista de músicas abaixo:
        </p>
        <p>
            <code>
                List&lt;Musica&gt; musicas = new List&lt;Musica&gt;<br />
                {<br />
                new Musica { Id = 1, Nome = "Sweet Child O'Mine", GeneroId = 1 },<br />
                new Musica { Id = 2, Nome = "I Shot The Sheriff", GeneroId = 2 },<br />
                new Musica { Id = 3, Nome = "Danúbio Azul", GeneroId = 6 }<br />
                };<br />
            </code>
        </p>
        <p>Elabore uma consulta Linq para trazer todas as músicas cujo GeneroId seja igual a 1.</p>

        <h4>Opinião do Alura</h4>
        <p>
            Você pode obter os objetos da coleção "musicas" com a cláusula <i>from</i>, e em seguida filtrar
            os nomes das músicas com id de gênero igual a 1:
        </p>
        <p>
            <code>
                var query = <br />
                from m in musicas<br />
                where m.GeneroId == 1<br />
                select m;<br />
            </code>
        </p>
    </div>

    <hr />
    <div class="CallToAction">
        <h3>Consulta com Join</h3>
        <p>
            Observe as listas abaixo, de gêneros musicais e de músicas:
        </p>
        <p>
            <code>
                List&lt;Genero&gt; generos = new List&lt;Genero&gt;<br />
                {<br />
                new Genero { Id = 1, Nome = "Rock" },<br />
                new Genero { Id = 2, Nome = "Reggae" },<br />
                new Genero { Id = 3, Nome = "Rock Progressivo" },<br />
                new Genero { Id = 4, Nome = "Jazz" },<br />
                new Genero { Id = 5, Nome = "Punk Rock" },<br />
                new Genero { Id = 6, Nome = "Classica" }<br />
                };<br />
            </code>
        </p>
        <p>
            <code>
                List&lt;Musica&gt; musicas = new List&lt;Musica&gt;<br />
                {<br />
                new Musica { Id = 1, Nome = "Sweet Child O'Mine", GeneroId = 1 },<br />
                new Musica { Id = 2, Nome = "I Shot The Sheriff", GeneroId = 2 },<br />
                new Musica { Id = 3, Nome = "Danúbio Azul", GeneroId = 6 }<br />
                };<br />
            </code>
        </p>
        <p>Crie uma consulta para listar os nomes das músicas e seus respectivos gêneros musicais.</p>

        <h4>Opinião do Alura</h4>
        <p>
            Você pode "ligar" os objetos das coleções "musicas" e "generos" com a cláusula <i>join</i> a partir das propriedades
            GeneroId e Id, respectivamente, e trazer um objeto anônimo na cláusula <i>select</i> com o nome da música e o nome
            do gênero:
        </p>
        <p>
            <code>
                var query = <br />
                from m in musicas<br />
                join g in generos on m.GeneroId equals g.Id<br />
                select new { NomeMusica = m.Nome, NomeGenero = g.Nome };<br />
            </code>
        </p>
    </div>

    <hr />
    <div class="CallToAction">
        <h3>Filtrando Consultas com Join</h3>
        <p>
            Observe as listas abaixo, de gêneros musicais e de músicas:
        </p>
        <p>
            <code>
                List&lt;Genero&gt; generos = new List&lt;Genero&gt;<br />
                {<br />
                new Genero { Id = 1, Nome = "Rock" },<br />
                new Genero { Id = 2, Nome = "Reggae" },<br />
                new Genero { Id = 3, Nome = "Rock Progressivo" },<br />
                new Genero { Id = 4, Nome = "Jazz" },<br />
                new Genero { Id = 5, Nome = "Punk Rock" },<br />
                new Genero { Id = 6, Nome = "Classica" }<br />
                };<br />
            </code>
        </p>
        <p>
            <code>
                List&lt;Musica&gt; musicas = new List&lt;Musica&gt;<br />
                {<br />
                new Musica { Id = 1, Nome = "Sweet Child O'Mine", GeneroId = 1 },<br />
                new Musica { Id = 2, Nome = "I Shot The Sheriff", GeneroId = 2 },<br />
                new Musica { Id = 3, Nome = "Danúbio Azul", GeneroId = 6 }<br />
                };<br />
            </code>
        </p>
        <p>Crie uma consulta para listar os nomes das músicas cujo gênero tenha o nome "Reggae".</p>

        <h4>Opinião do Alura</h4>
        <p>Você pode "ligar" os objetos das coleções "musicas" e "generos" a partir das propriedades
        GeneroId e Id, respectivamente, e em seguida aplicar um filtro para o nome do gênero:</p>
        <p>
            <code>
                var query = <br />
                from m in musicas<br />
                join g in generos on m.GeneroId equals g.Id<br />
                where g.Nome == "Reggae"<br />
                select m.Nome;<br />
            </code>
        </p>
    </div>
</body>
</html>